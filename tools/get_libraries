-- Extract libraries from a package description
-- (Not quite right: should also follow package dependencies)

module Main(main) where

import System.Environment
import System.Exit
import System.IO

import Package
import ParsePkgConf

main = do
	args <- getArgs
	case args of
	    [arg] -> get_libraries arg
	    _ -> do
		progName <- getProgName
		hPutStrLn stderr ("usage: " ++ progName ++ " package-file")
		exitFailure

get_libraries :: String -> IO ()
get_libraries file = do
	def <- readFile file
	let pkg = parseOnePackageConfig def
	putStrLn $ unwords $ filter (/= "HS" ++ name pkg ++ "_cbits") $
		filter (not . null) $
		extra_libraries pkg
