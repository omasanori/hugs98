-- Extract ld options from a package description
-- (Not quite right: should also follow package dependencies)

module Main(main) where

import System.Environment
import System.Exit
import System.IO

import Package
import ParsePkgConf

main = do
	args <- getArgs
	case args of
	    [arg] -> get_ld_opts arg
	    _ -> do
		progName <- getProgName
		hPutStrLn stderr ("usage: " ++ progName ++ " package-file")
		exitFailure

get_ld_opts :: String -> IO ()
get_ld_opts file = do
	def <- readFile file
	let pkg = parseOnePackageConfig def
	putStrLn $ unwords $ filter (not . null) $ extra_ld_opts pkg
